{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'Auth.IndexView',\n\n  data() {\n    return {\n      //state loggedIn with localStorage\n      loggedIn: localStorage.getItem('loggedIn'),\n      //state token\n      token: localStorage.getItem('token'),\n      //state user\n      user: [],\n      //state validation\n      validation: [],\n      //state login failed\n      loginFailed: null\n    };\n  },\n\n  methods: {\n    login() {\n      if (this.user.email && this.user.password) {\n        axios.get('http://localhost:8000/sanctum/csrf-cookie').then(response => {\n          //debug cookie\n          console.log(response);\n          axios.post('http://localhost:8000/api/login', {\n            email: this.user.email,\n            password: this.user.password\n          }).then(res => {\n            //debug user login\n            console.log(res);\n\n            if (res.data.success) {\n              //set localStorage\n              localStorage.setItem(\"loggedIn\", \"true\"); //set localStorage Token\n\n              localStorage.setItem(\"token\", res.data.token); //change state\n\n              this.loggedIn = true; //redirect dashboard\n\n              return this.$router.push({\n                name: 'dashboard.index'\n              });\n            } else {\n              //set state login failed\n              this.loginFailed = true;\n            }\n          }).catch(error => {\n            this.loginFailed = true;\n            console.log(error);\n          });\n        });\n      }\n\n      this.validation = [];\n\n      if (!this.user.email) {\n        this.validation.email = true;\n      }\n\n      if (!this.user.password) {\n        this.validation.password = true;\n      }\n    }\n\n  },\n\n  //check user already logged in\n  mounted() {\n    if (this.loggedIn) {\n      return this.$router.push({\n        name: 'dashboard.index'\n      });\n    }\n  }\n\n};","map":{"version":3,"mappings":"AA4EI,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACXC,MAAI,EAAE,gBADK;;AAGXC,MAAI,GAAG;AACH,WAAO;AACH;AACAC,cAAQ,EAAEC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAFP;AAGH;AACAC,WAAK,EAAEF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAJJ;AAKH;AACAE,UAAI,EAAE,EANH;AAOH;AACAC,gBAAU,EAAE,EART;AASH;AACAC,iBAAW,EAAE;AAVV,KAAP;AAYH,GAhBU;;AAiBXC,SAAO,EAAE;AAELC,SAAK,GAAG;AACJ,UAAI,KAAKJ,IAAL,CAAUK,KAAV,IAAmB,KAAKL,IAAL,CAAUM,QAAjC,EAA2C;AACvCb,aAAK,CAACc,GAAN,CAAU,2CAAV,EACKC,IADL,CACUC,QAAO,IAAK;AAEd;AACAC,iBAAO,CAACC,GAAR,CAAYF,QAAZ;AAEAhB,eAAK,CAACmB,IAAN,CAAW,iCAAX,EAA8C;AAC1CP,iBAAK,EAAE,KAAKL,IAAL,CAAUK,KADyB;AAE1CC,oBAAQ,EAAE,KAAKN,IAAL,CAAUM;AAFsB,WAA9C,EAGGE,IAHH,CAGQK,GAAE,IAAK;AAEX;AACAH,mBAAO,CAACC,GAAR,CAAYE,GAAZ;;AAEA,gBAAIA,GAAG,CAAClB,IAAJ,CAASmB,OAAb,EAAsB;AAElB;AACAjB,0BAAY,CAACkB,OAAb,CAAqB,UAArB,EAAiC,MAAjC,EAHkB,CAKlB;;AACAlB,0BAAY,CAACkB,OAAb,CAAqB,OAArB,EAA8BF,GAAG,CAAClB,IAAJ,CAASI,KAAvC,EANkB,CAQlB;;AACA,mBAAKH,QAAL,GAAgB,IAAhB,CATkB,CAWlB;;AACA,qBAAO,KAAKoB,OAAL,CAAaC,IAAb,CAAkB;AAAEvB,oBAAI,EAAE;AAAR,eAAlB,CAAP;AAEJ,aAdA,MAcO;AACH;AACA,mBAAKQ,WAAL,GAAmB,IAAnB;AACJ;AAEH,WA3BD,EA2BGgB,KA3BH,CA2BSC,KAAI,IAAK;AACd,iBAAKjB,WAAL,GAAmB,IAAnB;AACAQ,mBAAO,CAACC,GAAR,CAAYQ,KAAZ;AACH,WA9BD;AAgCH,SAtCL;AAuCJ;;AAEA,WAAKlB,UAAL,GAAkB,EAAlB;;AAEA,UAAI,CAAC,KAAKD,IAAL,CAAUK,KAAf,EAAsB;AAClB,aAAKJ,UAAL,CAAgBI,KAAhB,GAAwB,IAAxB;AACJ;;AAEA,UAAI,CAAC,KAAKL,IAAL,CAAUM,QAAf,EAAyB;AACrB,aAAKL,UAAL,CAAgBK,QAAhB,GAA2B,IAA3B;AACJ;AAEJ;;AAvDK,GAjBE;;AA2EX;AACAc,SAAO,GAAG;AACN,QAAI,KAAKxB,QAAT,EAAmB;AACf,aAAO,KAAKoB,OAAL,CAAaC,IAAb,CAAkB;AAAEvB,YAAI,EAAE;AAAR,OAAlB,CAAP;AACJ;AACJ;;AAhFW,CAAf","names":["axios","name","data","loggedIn","localStorage","getItem","token","user","validation","loginFailed","methods","login","email","password","get","then","response","console","log","post","res","success","setItem","$router","push","catch","error","mounted"],"sourceRoot":"","sources":["E:\\KULIAH\\SEKERIPSI\\PROGRESS\\OTW\\FRONTEND\\mls-frontend_v2\\src\\views\\Auth\\IndexView.vue"],"sourcesContent":["<template>\r\n    <div class=\"auth-full-height container d-flex flex-column justify-content-center\">\r\n        <div class=\"row justify-content-center\">\r\n            <div class=\"col-md-9\">\r\n                <div class=\"card row mx-0 flex-row overflow-hidden\">\r\n                    <div class=\"col-md-4 bg-size-cover d-flex align-items-center p-4\" style=\"background-image: url('assets/images/others/bg-2.jpg');\">\r\n                        <div>\r\n                            <div class=\"mb-5\">\r\n                                <div class=\"logo\">\r\n                                    <img alt=\"logo\" class=\"img-fluid\" src=\"assets/images/logo/logo-white.png\" style=\"height: 50px;\">\r\n                                </div>\r\n                            </div>\r\n                            <h3 class=\"text-white\">Learning System </h3>\r\n                            <p class=\"text-white mt-4 mb-5 o-75\">Cloud Based with Proxmox VE Open Source - We Made Simple Cloud Computing Service.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-md-8 px-0\">\r\n                        <div class=\"card-body\">\r\n                            <div class=\"my-5 mx-auto\" style=\"max-width: 350px;\">\r\n                                <div class=\"mb-3\">\r\n                                    <h3>Login</h3>\r\n                                </div>\r\n                                <form @submit.prevent=\"login\">\r\n                                    <div class=\"form-group mb-3\">\r\n                                        <label class=\"form-label\">Email</label>\r\n                                        <input class=\"form-control\" v-model=\"user.email\" />\r\n                                         <div v-if=\"validation.email\" class=\"text-danger\">\r\n                                            Masukkan Email !\r\n                                         </div>\r\n                                    </div>\r\n                                   \r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label d-flex justify-content-between\">\r\n                                            <span>Password</span>\r\n                                            <a href=\"\" class=\"text-primary font\">Forget Password?</a>\r\n                                        </label>\r\n                                        <div class=\"form-group input-affix flex-column\">\r\n                                            <label class=\"d-none\">Password</label>\r\n                                            <input formcontrolname=\"password\" class=\"form-control\" type=\"password\" v-model=\"user.password\">\r\n                                            <i class=\"suffix-icon feather cursor-pointer text-dark icon-eye\" ng-reflect-ng-class=\"icon-eye\"></i>\r\n                                        </div>\r\n                                         <div v-if=\"validation.password\" class=\"text-danger\">\r\n                                            Masukkan Password !\r\n                                        </div>\r\n                                    </div>\r\n                                    <button type=\"submit\" class=\"btn btn-primary w-100\">Log In</button>\r\n                                </form>\r\n                                <div class=\"divider\">\r\n                                    <span class=\"divider-text text-muted\">or login with</span>\r\n                                </div>\r\n                                <div class=\"row\">\r\n                                    <div class=\"col px-1\">\r\n                                        <button class=\"btn btn-outline-secondary w-100\">\r\n                                            <img src=\"assets/images/thumbs/thumb-1.png\" alt=\"\" style=\"max-width: 20px;\">\r\n                                        </button>\r\n                                    </div>\r\n                                    <div class=\"col px-1\">\r\n                                        <button class=\"btn btn-outline-secondary w-100\">\r\n                                            <img src=\"assets/images/thumbs/thumb-2.png\" alt=\"\" style=\"max-width: 20px;\">\r\n                                        </button>\r\n                                    </div>\r\n                                    <div class=\"col px-1\">\r\n                                        <button class=\"btn btn-outline-secondary w-100\">\r\n                                            <img src=\"assets/images/thumbs/thumb-3.png\" alt=\"\" style=\"max-width: 20px;\">\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import axios from 'axios'\r\n\r\n    export default {\r\n        name: 'Auth.IndexView',\r\n\r\n        data() {\r\n            return {\r\n                //state loggedIn with localStorage\r\n                loggedIn: localStorage.getItem('loggedIn'),\r\n                //state token\r\n                token: localStorage.getItem('token'),\r\n                //state user\r\n                user: [],\r\n                //state validation\r\n                validation: [],\r\n                //state login failed\r\n                loginFailed: null\r\n            }\r\n        },\r\n        methods: {\r\n\r\n            login() {\r\n                if (this.user.email && this.user.password) {\r\n                    axios.get('http://localhost:8000/sanctum/csrf-cookie')\r\n                        .then(response => {\r\n\r\n                            //debug cookie\r\n                            console.log(response)\r\n\r\n                            axios.post('http://localhost:8000/api/login', {\r\n                                email: this.user.email,\r\n                                password: this.user.password\r\n                            }).then(res => {\r\n\r\n                                //debug user login\r\n                                console.log(res)\r\n\r\n                                if (res.data.success) {\r\n\r\n                                    //set localStorage\r\n                                    localStorage.setItem(\"loggedIn\", \"true\")\r\n\r\n                                    //set localStorage Token\r\n                                    localStorage.setItem(\"token\", res.data.token)\r\n\r\n                                    //change state\r\n                                    this.loggedIn = true\r\n\r\n                                    //redirect dashboard\r\n                                    return this.$router.push({ name: 'dashboard.index' })\r\n\r\n                                } else {\r\n                                    //set state login failed\r\n                                    this.loginFailed = true\r\n                                }\r\n\r\n                            }).catch(error => {\r\n                                this.loginFailed = true\r\n                                console.log(error)\r\n                            })\r\n\r\n                        })\r\n                }\r\n\r\n                this.validation = []\r\n\r\n                if (!this.user.email) {\r\n                    this.validation.email = true\r\n                }\r\n\r\n                if (!this.user.password) {\r\n                    this.validation.password = true\r\n                }\r\n\r\n            }\r\n        },\r\n\r\n        //check user already logged in\r\n        mounted() {\r\n            if (this.loggedIn) {\r\n                return this.$router.push({ name: 'dashboard.index' })\r\n            }\r\n        }\r\n    }\r\n</script>"]},"metadata":{},"sourceType":"module"}