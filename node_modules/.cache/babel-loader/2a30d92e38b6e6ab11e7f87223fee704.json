{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\nvar _watch;\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n} // Tagged input form control\n// Based loosely on https://adamwathan.me/renderless-components-in-vuejs/\n\n\nimport { Vue } from '../../vue';\nimport { NAME_FORM_TAGS } from '../../constants/components';\nimport { EVENT_NAME_BLUR, EVENT_NAME_FOCUS, EVENT_NAME_FOCUSIN, EVENT_NAME_FOCUSOUT, EVENT_NAME_TAG_STATE, EVENT_OPTIONS_PASSIVE } from '../../constants/events';\nimport { CODE_BACKSPACE, CODE_DELETE, CODE_ENTER } from '../../constants/key-codes';\nimport { PROP_TYPE_ARRAY, PROP_TYPE_ARRAY_OBJECT_STRING, PROP_TYPE_ARRAY_STRING, PROP_TYPE_BOOLEAN, PROP_TYPE_FUNCTION, PROP_TYPE_NUMBER, PROP_TYPE_OBJECT, PROP_TYPE_STRING } from '../../constants/props';\nimport { RX_SPACES } from '../../constants/regex';\nimport { SLOT_NAME_DEFAULT, SLOT_NAME_ADD_BUTTON_TEXT } from '../../constants/slots';\nimport { arrayIncludes, concat } from '../../utils/array';\nimport { cssEscape } from '../../utils/css-escape';\nimport { attemptBlur, attemptFocus, closest, matches, requestAF, select } from '../../utils/dom';\nimport { eventOn, eventOff, stopEvent } from '../../utils/events';\nimport { identity } from '../../utils/identity';\nimport { isEvent, isNumber, isString } from '../../utils/inspect';\nimport { looseEqual } from '../../utils/loose-equal';\nimport { makeModelMixin } from '../../utils/model';\nimport { omit, pick, sortKeys } from '../../utils/object';\nimport { hasPropFunction, makeProp, makePropsConfigurable } from '../../utils/props';\nimport { escapeRegExp, toString, trim, trimLeft } from '../../utils/string';\nimport { formControlMixin, props as formControlProps } from '../../mixins/form-control';\nimport { formSizeMixin, props as formSizeProps } from '../../mixins/form-size';\nimport { formStateMixin, props as formStateProps } from '../../mixins/form-state';\nimport { idMixin, props as idProps } from '../../mixins/id';\nimport { listenersMixin } from '../../mixins/listeners';\nimport { normalizeSlotMixin } from '../../mixins/normalize-slot';\nimport { BButton } from '../button/button';\nimport { BFormInvalidFeedback } from '../form/form-invalid-feedback';\nimport { BFormText } from '../form/form-text';\nimport { BFormTag } from './form-tag'; // --- Constants ---\n\nvar _makeModelMixin = makeModelMixin('value', {\n  type: PROP_TYPE_ARRAY,\n  defaultValue: []\n}),\n    modelMixin = _makeModelMixin.mixin,\n    modelProps = _makeModelMixin.props,\n    MODEL_PROP_NAME = _makeModelMixin.prop,\n    MODEL_EVENT_NAME = _makeModelMixin.event; // Supported input types (for built in input)\n\n\nvar TYPES = ['text', 'email', 'tel', 'url', 'number']; // Default ignore input focus selector\n\nvar DEFAULT_INPUT_FOCUS_SELECTOR = ['.b-form-tag', 'button', 'input', 'select'].join(' '); // --- Helper methods ---\n// Escape special chars in string and replace\n// contiguous spaces with a whitespace match\n\nvar escapeRegExpChars = function escapeRegExpChars(str) {\n  return escapeRegExp(str).replace(RX_SPACES, '\\\\s');\n}; // Remove leading/trailing spaces from array of tags and remove duplicates\n\n\nvar cleanTags = function cleanTags(tags) {\n  return concat(tags).map(function (tag) {\n    return trim(toString(tag));\n  }).filter(function (tag, index, arr) {\n    return tag.length > 0 && arr.indexOf(tag) === index;\n  });\n}; // Processes an input/change event, normalizing string or event argument\n\n\nvar processEventValue = function processEventValue(event) {\n  return isString(event) ? event : isEvent(event) ? event.target.value || '' : '';\n}; // Returns a fresh empty `tagsState` object\n\n\nvar cleanTagsState = function cleanTagsState() {\n  return {\n    all: [],\n    valid: [],\n    invalid: [],\n    duplicate: []\n  };\n}; // --- Props ---\n\n\nvar props = makePropsConfigurable(sortKeys(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, idProps), modelProps), formControlProps), formSizeProps), formStateProps), {}, {\n  addButtonText: makeProp(PROP_TYPE_STRING, 'Add'),\n  addButtonVariant: makeProp(PROP_TYPE_STRING, 'outline-secondary'),\n  // Enable change event triggering tag addition\n  // Handy if using <select> as the input\n  addOnChange: makeProp(PROP_TYPE_BOOLEAN, false),\n  duplicateTagText: makeProp(PROP_TYPE_STRING, 'Duplicate tag(s)'),\n  feedbackAriaLive: makeProp(PROP_TYPE_STRING, 'assertive'),\n  // Disable the input focus behavior when clicking\n  // on element matching the selector (or selectors)\n  ignoreInputFocusSelector: makeProp(PROP_TYPE_ARRAY_STRING, DEFAULT_INPUT_FOCUS_SELECTOR),\n  // Additional attributes to add to the input element\n  inputAttrs: makeProp(PROP_TYPE_OBJECT, {}),\n  inputClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  inputId: makeProp(PROP_TYPE_STRING),\n  inputType: makeProp(PROP_TYPE_STRING, 'text', function (value) {\n    return arrayIncludes(TYPES, value);\n  }),\n  invalidTagText: makeProp(PROP_TYPE_STRING, 'Invalid tag(s)'),\n  limit: makeProp(PROP_TYPE_NUMBER),\n  limitTagsText: makeProp(PROP_TYPE_STRING, 'Tag limit reached'),\n  // Disable ENTER key from triggering tag addition\n  noAddOnEnter: makeProp(PROP_TYPE_BOOLEAN, false),\n  // Disable the focus ring on the root element\n  noOuterFocus: makeProp(PROP_TYPE_BOOLEAN, false),\n  noTagRemove: makeProp(PROP_TYPE_BOOLEAN, false),\n  placeholder: makeProp(PROP_TYPE_STRING, 'Add tag...'),\n  // Enable deleting last tag in list when CODE_BACKSPACE is\n  // pressed and input is empty\n  removeOnDelete: makeProp(PROP_TYPE_BOOLEAN, false),\n  // Character (or characters) that trigger adding tags\n  separator: makeProp(PROP_TYPE_ARRAY_STRING),\n  tagClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  tagPills: makeProp(PROP_TYPE_BOOLEAN, false),\n  tagRemoveLabel: makeProp(PROP_TYPE_STRING, 'Remove tag'),\n  tagRemovedLabel: makeProp(PROP_TYPE_STRING, 'Tag removed'),\n  tagValidator: makeProp(PROP_TYPE_FUNCTION),\n  tagVariant: makeProp(PROP_TYPE_STRING, 'secondary')\n})), NAME_FORM_TAGS); // --- Main component ---\n// @vue/component\n\nexport var BFormTags = /*#__PURE__*/Vue.extend({\n  name: NAME_FORM_TAGS,\n  mixins: [listenersMixin, idMixin, modelMixin, formControlMixin, formSizeMixin, formStateMixin, normalizeSlotMixin],\n  props: props,\n  data: function data() {\n    return {\n      hasFocus: false,\n      newTag: '',\n      tags: [],\n      // Tags that were removed\n      removedTags: [],\n      // Populated when tags are parsed\n      tagsState: cleanTagsState(),\n      focusState: null\n    };\n  },\n  computed: {\n    computedInputId: function computedInputId() {\n      return this.inputId || this.safeId('__input__');\n    },\n    computedInputType: function computedInputType() {\n      // We only allow certain types\n      return arrayIncludes(TYPES, this.inputType) ? this.inputType : 'text';\n    },\n    computedInputAttrs: function computedInputAttrs() {\n      var disabled = this.disabled,\n          form = this.form;\n      return _objectSpread(_objectSpread({}, this.inputAttrs), {}, {\n        // Must have attributes\n        id: this.computedInputId,\n        value: this.newTag,\n        disabled: disabled,\n        form: form\n      });\n    },\n    computedInputHandlers: function computedInputHandlers() {\n      return _objectSpread(_objectSpread({}, omit(this.bvListeners, [EVENT_NAME_FOCUSIN, EVENT_NAME_FOCUSOUT])), {}, {\n        blur: this.onInputBlur,\n        change: this.onInputChange,\n        focus: this.onInputFocus,\n        input: this.onInputInput,\n        keydown: this.onInputKeydown,\n        reset: this.reset\n      });\n    },\n    computedSeparator: function computedSeparator() {\n      // Merge the array into a string\n      return concat(this.separator).filter(isString).filter(identity).join('');\n    },\n    computedSeparatorRegExp: function computedSeparatorRegExp() {\n      // We use a computed prop here to precompile the RegExp\n      // The RegExp is a character class RE in the form of `/[abc]+/`\n      // where a, b, and c are the valid separator characters\n      // -> `tags = str.split(/[abc]+/).filter(t => t)`\n      var separator = this.computedSeparator;\n      return separator ? new RegExp(\"[\".concat(escapeRegExpChars(separator), \"]+\")) : null;\n    },\n    computedJoiner: function computedJoiner() {\n      // When tag(s) are invalid or duplicate, we leave them\n      // in the input so that the user can see them\n      // If there are more than one tag in the input, we use the\n      // first separator character as the separator in the input\n      // We append a space if the first separator is not a space\n      var joiner = this.computedSeparator.charAt(0);\n      return joiner !== ' ' ? \"\".concat(joiner, \" \") : joiner;\n    },\n    computeIgnoreInputFocusSelector: function computeIgnoreInputFocusSelector() {\n      // Normalize to an single selector with selectors separated by `,`\n      return concat(this.ignoreInputFocusSelector).filter(identity).join(',').trim();\n    },\n    disableAddButton: function disableAddButton() {\n      var _this = this; // If 'Add' button should be disabled\n      // If the input contains at least one tag that can\n      // be added, then the 'Add' button should be enabled\n\n\n      var newTag = trim(this.newTag);\n      return newTag === '' || !this.splitTags(newTag).some(function (t) {\n        return !arrayIncludes(_this.tags, t) && _this.validateTag(t);\n      });\n    },\n    duplicateTags: function duplicateTags() {\n      return this.tagsState.duplicate;\n    },\n    hasDuplicateTags: function hasDuplicateTags() {\n      return this.duplicateTags.length > 0;\n    },\n    invalidTags: function invalidTags() {\n      return this.tagsState.invalid;\n    },\n    hasInvalidTags: function hasInvalidTags() {\n      return this.invalidTags.length > 0;\n    },\n    isLimitReached: function isLimitReached() {\n      var limit = this.limit;\n      return isNumber(limit) && limit >= 0 && this.tags.length >= limit;\n    }\n  },\n  watch: (_watch = {}, _defineProperty(_watch, MODEL_PROP_NAME, function (newValue) {\n    this.tags = cleanTags(newValue);\n  }), _defineProperty(_watch, \"tags\", function tags(newValue, oldValue) {\n    // Update the `v-model` (if it differs from the value prop)\n    if (!looseEqual(newValue, this[MODEL_PROP_NAME])) {\n      this.$emit(MODEL_EVENT_NAME, newValue);\n    }\n\n    if (!looseEqual(newValue, oldValue)) {\n      newValue = concat(newValue).filter(identity);\n      oldValue = concat(oldValue).filter(identity);\n      this.removedTags = oldValue.filter(function (old) {\n        return !arrayIncludes(newValue, old);\n      });\n    }\n  }), _defineProperty(_watch, \"tagsState\", function tagsState(newValue, oldValue) {\n    // Emit a tag-state event when the `tagsState` object changes\n    if (!looseEqual(newValue, oldValue)) {\n      this.$emit(EVENT_NAME_TAG_STATE, newValue.valid, newValue.invalid, newValue.duplicate);\n    }\n  }), _watch),\n  created: function created() {\n    // We do this in created to make sure an input event emits\n    // if the cleaned tags are not equal to the value prop\n    this.tags = cleanTags(this[MODEL_PROP_NAME]);\n  },\n  mounted: function mounted() {\n    // Listen for form reset events, to reset the tags input\n    var $form = closest('form', this.$el);\n\n    if ($form) {\n      eventOn($form, 'reset', this.reset, EVENT_OPTIONS_PASSIVE);\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    var $form = closest('form', this.$el);\n\n    if ($form) {\n      eventOff($form, 'reset', this.reset, EVENT_OPTIONS_PASSIVE);\n    }\n  },\n  methods: {\n    addTag: function addTag(newTag) {\n      newTag = isString(newTag) ? newTag : this.newTag;\n      /* istanbul ignore next */\n\n      if (this.disabled || trim(newTag) === '' || this.isLimitReached) {\n        // Early exit\n        return;\n      }\n\n      var parsed = this.parseTags(newTag); // Add any new tags to the `tags` array, or if the\n      // array of `allTags` is empty, we clear the input\n\n      if (parsed.valid.length > 0 || parsed.all.length === 0) {\n        // Clear the user input element (and leave in any invalid/duplicate tag(s)\n\n        /* istanbul ignore if: full testing to be added later */\n        if (matches(this.getInput(), 'select')) {\n          // The following is needed to properly\n          // work with `<select>` elements\n          this.newTag = '';\n        } else {\n          var invalidAndDuplicates = [].concat(_toConsumableArray(parsed.invalid), _toConsumableArray(parsed.duplicate));\n          this.newTag = parsed.all.filter(function (tag) {\n            return arrayIncludes(invalidAndDuplicates, tag);\n          }).join(this.computedJoiner).concat(invalidAndDuplicates.length > 0 ? this.computedJoiner.charAt(0) : '');\n        }\n      }\n\n      if (parsed.valid.length > 0) {\n        // We add the new tags in one atomic operation\n        // to trigger reactivity once (instead of once per tag)\n        // We do this after we update the new tag input value\n        // `concat()` can be faster than array spread, when both args are arrays\n        this.tags = concat(this.tags, parsed.valid);\n      }\n\n      this.tagsState = parsed; // Attempt to re-focus the input (specifically for when using the Add\n      // button, as the button disappears after successfully adding a tag\n\n      this.focus();\n    },\n    removeTag: function removeTag(tag) {\n      /* istanbul ignore next */\n      if (this.disabled) {\n        return;\n      } // TODO:\n      //   Add `onRemoveTag(tag)` user method, which if returns `false`\n      //   will prevent the tag from being removed (i.e. confirmation)\n      //   Or emit cancelable `BvEvent`\n\n\n      this.tags = this.tags.filter(function (t) {\n        return t !== tag;\n      });\n    },\n    reset: function reset() {\n      var _this2 = this;\n\n      this.newTag = '';\n      this.tags = [];\n      this.$nextTick(function () {\n        _this2.removedTags = [];\n        _this2.tagsState = cleanTagsState();\n      });\n    },\n    // --- Input element event handlers ---\n    onInputInput: function onInputInput(event) {\n      /* istanbul ignore next: hard to test composition events */\n      if (this.disabled || isEvent(event) && event.target.composing) {\n        // `event.target.composing` is set by Vue (`v-model` directive)\n        // https://github.com/vuejs/vue/blob/dev/src/platforms/web/runtime/directives/model.js\n        return;\n      }\n\n      var newTag = processEventValue(event);\n      var separatorRe = this.computedSeparatorRegExp;\n\n      if (this.newTag !== newTag) {\n        this.newTag = newTag;\n      } // We ignore leading whitespace for the following\n\n\n      newTag = trimLeft(newTag);\n\n      if (separatorRe && separatorRe.test(newTag.slice(-1))) {\n        // A trailing separator character was entered, so add the tag(s)\n        // Note: More than one tag on input event is possible via copy/paste\n        this.addTag();\n      } else {\n        // Validate (parse tags) on input event\n        this.tagsState = newTag === '' ? cleanTagsState() : this.parseTags(newTag);\n      }\n    },\n    onInputChange: function onInputChange(event) {\n      // Change is triggered on `<input>` blur, or `<select>` selected\n      // This event is opt-in\n      if (!this.disabled && this.addOnChange) {\n        var newTag = processEventValue(event);\n        /* istanbul ignore next */\n\n        if (this.newTag !== newTag) {\n          this.newTag = newTag;\n        }\n\n        this.addTag();\n      }\n    },\n    onInputKeydown: function onInputKeydown(event) {\n      // Early exit\n\n      /* istanbul ignore next */\n      if (this.disabled || !isEvent(event)) {\n        return;\n      }\n\n      var keyCode = event.keyCode;\n      var value = event.target.value || '';\n      /* istanbul ignore else: testing to be added later */\n\n      if (!this.noAddOnEnter && keyCode === CODE_ENTER) {\n        // Attempt to add the tag when user presses enter\n        stopEvent(event, {\n          propagation: false\n        });\n        this.addTag();\n      } else if (this.removeOnDelete && (keyCode === CODE_BACKSPACE || keyCode === CODE_DELETE) && value === '') {\n        // Remove the last tag if the user pressed backspace/delete and the input is empty\n        stopEvent(event, {\n          propagation: false\n        });\n        this.tags = this.tags.slice(0, -1);\n      }\n    },\n    // --- Wrapper event handlers ---\n    onClick: function onClick(event) {\n      var _this3 = this;\n\n      var ignoreFocusSelector = this.computeIgnoreInputFocusSelector;\n\n      if (!ignoreFocusSelector || !closest(ignoreFocusSelector, event.target, true)) {\n        this.$nextTick(function () {\n          _this3.focus();\n        });\n      }\n    },\n    onInputFocus: function onInputFocus(event) {\n      var _this4 = this;\n\n      if (this.focusState !== 'out') {\n        this.focusState = 'in';\n        this.$nextTick(function () {\n          requestAF(function () {\n            if (_this4.hasFocus) {\n              _this4.$emit(EVENT_NAME_FOCUS, event);\n\n              _this4.focusState = null;\n            }\n          });\n        });\n      }\n    },\n    onInputBlur: function onInputBlur(event) {\n      var _this5 = this;\n\n      if (this.focusState !== 'in') {\n        this.focusState = 'out';\n        this.$nextTick(function () {\n          requestAF(function () {\n            if (!_this5.hasFocus) {\n              _this5.$emit(EVENT_NAME_BLUR, event);\n\n              _this5.focusState = null;\n            }\n          });\n        });\n      }\n    },\n    onFocusin: function onFocusin(event) {\n      this.hasFocus = true;\n      this.$emit(EVENT_NAME_FOCUSIN, event);\n    },\n    onFocusout: function onFocusout(event) {\n      this.hasFocus = false;\n      this.$emit(EVENT_NAME_FOCUSOUT, event);\n    },\n    handleAutofocus: function handleAutofocus() {\n      var _this6 = this;\n\n      this.$nextTick(function () {\n        requestAF(function () {\n          if (_this6.autofocus) {\n            _this6.focus();\n          }\n        });\n      });\n    },\n    // --- Public methods ---\n    focus: function focus() {\n      if (!this.disabled) {\n        attemptFocus(this.getInput());\n      }\n    },\n    blur: function blur() {\n      if (!this.disabled) {\n        attemptBlur(this.getInput());\n      }\n    },\n    // --- Private methods ---\n    splitTags: function splitTags(newTag) {\n      // Split the input into an array of raw tags\n      newTag = toString(newTag);\n      var separatorRe = this.computedSeparatorRegExp; // Split the tag(s) via the optional separator\n      // Normally only a single tag is provided, but copy/paste\n      // can enter multiple tags in a single operation\n\n      return (separatorRe ? newTag.split(separatorRe) : [newTag]).map(trim).filter(identity);\n    },\n    parseTags: function parseTags(newTag) {\n      var _this7 = this; // Takes `newTag` value and parses it into `validTags`,\n      // `invalidTags`, and duplicate tags as an object\n      // Split the input into raw tags\n\n\n      var tags = this.splitTags(newTag); // Base results\n\n      var parsed = {\n        all: tags,\n        valid: [],\n        invalid: [],\n        duplicate: []\n      }; // Parse the unique tags\n\n      tags.forEach(function (tag) {\n        if (arrayIncludes(_this7.tags, tag) || arrayIncludes(parsed.valid, tag)) {\n          // Unique duplicate tags\n          if (!arrayIncludes(parsed.duplicate, tag)) {\n            parsed.duplicate.push(tag);\n          }\n        } else if (_this7.validateTag(tag)) {\n          // We only add unique/valid tags\n          parsed.valid.push(tag);\n        } else {\n          // Unique invalid tags\n          if (!arrayIncludes(parsed.invalid, tag)) {\n            parsed.invalid.push(tag);\n          }\n        }\n      });\n      return parsed;\n    },\n    validateTag: function validateTag(tag) {\n      var tagValidator = this.tagValidator;\n      return hasPropFunction(tagValidator) ? tagValidator(tag) : true;\n    },\n    getInput: function getInput() {\n      // Returns the input element reference (or null if not found)\n      // We need to escape `computedInputId` since it can be user-provided\n      return select(\"#\".concat(cssEscape(this.computedInputId)), this.$el);\n    },\n    // Default User Interface render\n    defaultRender: function defaultRender(_ref) {\n      var addButtonText = _ref.addButtonText,\n          addButtonVariant = _ref.addButtonVariant,\n          addTag = _ref.addTag,\n          disableAddButton = _ref.disableAddButton,\n          disabled = _ref.disabled,\n          duplicateTagText = _ref.duplicateTagText,\n          inputAttrs = _ref.inputAttrs,\n          inputClass = _ref.inputClass,\n          inputHandlers = _ref.inputHandlers,\n          inputType = _ref.inputType,\n          invalidTagText = _ref.invalidTagText,\n          isDuplicate = _ref.isDuplicate,\n          isInvalid = _ref.isInvalid,\n          isLimitReached = _ref.isLimitReached,\n          limitTagsText = _ref.limitTagsText,\n          noTagRemove = _ref.noTagRemove,\n          placeholder = _ref.placeholder,\n          removeTag = _ref.removeTag,\n          tagClass = _ref.tagClass,\n          tagPills = _ref.tagPills,\n          tagRemoveLabel = _ref.tagRemoveLabel,\n          tagVariant = _ref.tagVariant,\n          tags = _ref.tags;\n      var h = this.$createElement; // Make the list of tags\n\n      var $tags = tags.map(function (tag) {\n        tag = toString(tag);\n        return h(BFormTag, {\n          class: tagClass,\n          // `BFormTag` will auto generate an ID\n          // so we do not need to set the ID prop\n          props: {\n            disabled: disabled,\n            noRemove: noTagRemove,\n            pill: tagPills,\n            removeLabel: tagRemoveLabel,\n            tag: 'li',\n            title: tag,\n            variant: tagVariant\n          },\n          on: {\n            remove: function remove() {\n              return removeTag(tag);\n            }\n          },\n          key: \"tags_\".concat(tag)\n        }, tag);\n      }); // Feedback IDs if needed\n\n      var invalidFeedbackId = invalidTagText && isInvalid ? this.safeId('__invalid_feedback__') : null;\n      var duplicateFeedbackId = duplicateTagText && isDuplicate ? this.safeId('__duplicate_feedback__') : null;\n      var limitFeedbackId = limitTagsText && isLimitReached ? this.safeId('__limit_feedback__') : null; // Compute the `aria-describedby` attribute value\n\n      var ariaDescribedby = [inputAttrs['aria-describedby'], invalidFeedbackId, duplicateFeedbackId, limitFeedbackId].filter(identity).join(' '); // Input\n\n      var $input = h('input', {\n        staticClass: 'b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0',\n        class: inputClass,\n        style: {\n          outline: 0,\n          minWidth: '5rem'\n        },\n        attrs: _objectSpread(_objectSpread({}, inputAttrs), {}, {\n          'aria-describedby': ariaDescribedby || null,\n          type: inputType,\n          placeholder: placeholder || null\n        }),\n        domProps: {\n          value: inputAttrs.value\n        },\n        on: inputHandlers,\n        // Directive needed to get `event.target.composing` set (if needed)\n        directives: [{\n          name: 'model',\n          value: inputAttrs.value\n        }],\n        ref: 'input'\n      }); // Add button\n\n      var $button = h(BButton, {\n        staticClass: 'b-form-tags-button py-0',\n        class: {\n          // Only show the button if the tag can be added\n          // We use the `invisible` class instead of not rendering\n          // the button, so that we maintain layout to prevent\n          // the user input from jumping around\n          invisible: disableAddButton\n        },\n        style: {\n          fontSize: '90%'\n        },\n        props: {\n          disabled: disableAddButton || isLimitReached,\n          variant: addButtonVariant\n        },\n        on: {\n          click: function click() {\n            return addTag();\n          }\n        },\n        ref: 'button'\n      }, [this.normalizeSlot(SLOT_NAME_ADD_BUTTON_TEXT) || addButtonText]); // ID of the tags + input `<ul>` list\n      // Note we could concatenate `inputAttrs.id` with '__tag_list__'\n      // but `inputId` may be `null` until after mount\n      // `safeId()` returns `null`, if no user provided ID,\n      // until after mount when a unique ID is generated\n\n      var tagListId = this.safeId('__tag_list__');\n      var $field = h('li', {\n        staticClass: 'b-form-tags-field flex-grow-1',\n        attrs: {\n          role: 'none',\n          'aria-live': 'off',\n          'aria-controls': tagListId\n        },\n        key: 'tags_field'\n      }, [h('div', {\n        staticClass: 'd-flex',\n        attrs: {\n          role: 'group'\n        }\n      }, [$input, $button])]); // Wrap in an unordered list element (we use a list for accessibility)\n\n      var $ul = h('ul', {\n        staticClass: 'b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center',\n        attrs: {\n          id: tagListId\n        },\n        key: 'tags_list'\n      }, [$tags, $field]); // Assemble the feedback\n\n      var $feedback = h();\n\n      if (invalidTagText || duplicateTagText || limitTagsText) {\n        // Add an aria live region for the invalid/duplicate tag\n        // messages if the user has not disabled the messages\n        var ariaLive = this.feedbackAriaLive,\n            joiner = this.computedJoiner; // Invalid tag feedback if needed (error)\n\n        var $invalid = h();\n\n        if (invalidFeedbackId) {\n          $invalid = h(BFormInvalidFeedback, {\n            props: {\n              id: invalidFeedbackId,\n              ariaLive: ariaLive,\n              forceShow: true\n            },\n            key: 'tags_invalid_feedback'\n          }, [this.invalidTagText, ': ', this.invalidTags.join(joiner)]);\n        } // Duplicate tag feedback if needed (warning, not error)\n\n\n        var $duplicate = h();\n\n        if (duplicateFeedbackId) {\n          $duplicate = h(BFormText, {\n            props: {\n              id: duplicateFeedbackId,\n              ariaLive: ariaLive\n            },\n            key: 'tags_duplicate_feedback'\n          }, [this.duplicateTagText, ': ', this.duplicateTags.join(joiner)]);\n        } // Limit tags feedback if needed (warning, not error)\n\n\n        var $limit = h();\n\n        if (limitFeedbackId) {\n          $limit = h(BFormText, {\n            props: {\n              id: limitFeedbackId,\n              ariaLive: ariaLive\n            },\n            key: 'tags_limit_feedback'\n          }, [limitTagsText]);\n        }\n\n        $feedback = h('div', {\n          attrs: {\n            'aria-live': 'polite',\n            'aria-atomic': 'true'\n          },\n          key: 'tags_feedback'\n        }, [$invalid, $duplicate, $limit]);\n      } // Return the content\n\n\n      return [$ul, $feedback];\n    }\n  },\n  render: function render(h) {\n    var name = this.name,\n        disabled = this.disabled,\n        required = this.required,\n        form = this.form,\n        tags = this.tags,\n        computedInputId = this.computedInputId,\n        hasFocus = this.hasFocus,\n        noOuterFocus = this.noOuterFocus; // Scoped slot properties\n\n    var scope = _objectSpread({\n      // Array of tags (shallow copy to prevent mutations)\n      tags: tags.slice(),\n      // <input> v-bind:inputAttrs\n      inputAttrs: this.computedInputAttrs,\n      // We don't include this in the attrs, as users may want to override this\n      inputType: this.computedInputType,\n      // <input> v-on:inputHandlers\n      inputHandlers: this.computedInputHandlers,\n      // Methods\n      removeTag: this.removeTag,\n      addTag: this.addTag,\n      reset: this.reset,\n      // <input> :id=\"inputId\"\n      inputId: computedInputId,\n      // Invalid/Duplicate state information\n      isInvalid: this.hasInvalidTags,\n      invalidTags: this.invalidTags.slice(),\n      isDuplicate: this.hasDuplicateTags,\n      duplicateTags: this.duplicateTags.slice(),\n      isLimitReached: this.isLimitReached,\n      // If the 'Add' button should be disabled\n      disableAddButton: this.disableAddButton\n    }, pick(this.$props, ['addButtonText', 'addButtonVariant', 'disabled', 'duplicateTagText', 'form', 'inputClass', 'invalidTagText', 'limit', 'limitTagsText', 'noTagRemove', 'placeholder', 'required', 'separator', 'size', 'state', 'tagClass', 'tagPills', 'tagRemoveLabel', 'tagVariant'])); // Generate the user interface\n\n\n    var $content = this.normalizeSlot(SLOT_NAME_DEFAULT, scope) || this.defaultRender(scope); // Generate the `aria-live` region for the current value(s)\n\n    var $output = h('output', {\n      staticClass: 'sr-only',\n      attrs: {\n        id: this.safeId('__selected_tags__'),\n        role: 'status',\n        for: computedInputId,\n        'aria-live': hasFocus ? 'polite' : 'off',\n        'aria-atomic': 'true',\n        'aria-relevant': 'additions text'\n      }\n    }, this.tags.join(', ')); // Removed tag live region\n\n    var $removed = h('div', {\n      staticClass: 'sr-only',\n      attrs: {\n        id: this.safeId('__removed_tags__'),\n        role: 'status',\n        'aria-live': hasFocus ? 'assertive' : 'off',\n        'aria-atomic': 'true'\n      }\n    }, this.removedTags.length > 0 ? \"(\".concat(this.tagRemovedLabel, \") \").concat(this.removedTags.join(', ')) : ''); // Add hidden inputs for form submission\n\n    var $hidden = h();\n\n    if (name && !disabled) {\n      // We add hidden inputs for each tag if a name is provided\n      // When there are currently no tags, a visually hidden input\n      // with empty value is rendered for proper required handling\n      var hasTags = tags.length > 0;\n      $hidden = (hasTags ? tags : ['']).map(function (tag) {\n        return h('input', {\n          class: {\n            'sr-only': !hasTags\n          },\n          attrs: {\n            type: hasTags ? 'hidden' : 'text',\n            value: tag,\n            required: required,\n            name: name,\n            form: form\n          },\n          key: \"tag_input_\".concat(tag)\n        });\n      });\n    } // Return the rendered output\n\n\n    return h('div', {\n      staticClass: 'b-form-tags form-control h-auto',\n      class: [{\n        focus: hasFocus && !noOuterFocus && !disabled,\n        disabled: disabled\n      }, this.sizeFormClass, this.stateClass],\n      attrs: {\n        id: this.safeId(),\n        role: 'group',\n        tabindex: disabled || noOuterFocus ? null : '-1',\n        'aria-describedby': this.safeId('__selected_tags__')\n      },\n      on: {\n        click: this.onClick,\n        focusin: this.onFocusin,\n        focusout: this.onFocusout\n      }\n    }, [$output, $removed, $content, $hidden]);\n  }\n});","map":{"version":3,"sources":["E:/KULIAH/SEKERIPSI/PROGRESS/OTW/FRONTEND/mls-frontend_v2/node_modules/bootstrap-vue/esm/components/form-tags/form-tags.js"],"names":["_watch","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","Vue","NAME_FORM_TAGS","EVENT_NAME_BLUR","EVENT_NAME_FOCUS","EVENT_NAME_FOCUSIN","EVENT_NAME_FOCUSOUT","EVENT_NAME_TAG_STATE","EVENT_OPTIONS_PASSIVE","CODE_BACKSPACE","CODE_DELETE","CODE_ENTER","PROP_TYPE_ARRAY","PROP_TYPE_ARRAY_OBJECT_STRING","PROP_TYPE_ARRAY_STRING","PROP_TYPE_BOOLEAN","PROP_TYPE_FUNCTION","PROP_TYPE_NUMBER","PROP_TYPE_OBJECT","PROP_TYPE_STRING","RX_SPACES","SLOT_NAME_DEFAULT","SLOT_NAME_ADD_BUTTON_TEXT","arrayIncludes","concat","cssEscape","attemptBlur","attemptFocus","closest","matches","requestAF","select","eventOn","eventOff","stopEvent","identity","isEvent","isNumber","isString","looseEqual","makeModelMixin","omit","pick","sortKeys","hasPropFunction","makeProp","makePropsConfigurable","escapeRegExp","trim","trimLeft","formControlMixin","props","formControlProps","formSizeMixin","formSizeProps","formStateMixin","formStateProps","idMixin","idProps","listenersMixin","normalizeSlotMixin","BButton","BFormInvalidFeedback","BFormText","BFormTag","_makeModelMixin","type","defaultValue","modelMixin","mixin","modelProps","MODEL_PROP_NAME","prop","MODEL_EVENT_NAME","event","TYPES","DEFAULT_INPUT_FOCUS_SELECTOR","join","escapeRegExpChars","str","replace","cleanTags","tags","map","tag","index","indexOf","processEventValue","cleanTagsState","all","valid","invalid","duplicate","addButtonText","addButtonVariant","addOnChange","duplicateTagText","feedbackAriaLive","ignoreInputFocusSelector","inputAttrs","inputClass","inputId","inputType","invalidTagText","limit","limitTagsText","noAddOnEnter","noOuterFocus","noTagRemove","placeholder","removeOnDelete","separator","tagClass","tagPills","tagRemoveLabel","tagRemovedLabel","tagValidator","tagVariant","BFormTags","extend","mixins","data","hasFocus","newTag","removedTags","tagsState","focusState","computed","computedInputId","safeId","computedInputType","computedInputAttrs","disabled","form","id","computedInputHandlers","bvListeners","blur","onInputBlur","change","onInputChange","focus","onInputFocus","input","onInputInput","keydown","onInputKeydown","reset","computedSeparator","computedSeparatorRegExp","RegExp","computedJoiner","joiner","charAt","computeIgnoreInputFocusSelector","disableAddButton","_this","splitTags","some","t","validateTag","duplicateTags","hasDuplicateTags","invalidTags","hasInvalidTags","isLimitReached","watch","newValue","oldValue","$emit","old","created","mounted","$form","$el","beforeDestroy","methods","addTag","parsed","parseTags","getInput","invalidAndDuplicates","removeTag","_this2","$nextTick","composing","separatorRe","keyCode","propagation","onClick","_this3","ignoreFocusSelector","_this4","_this5","onFocusin","onFocusout","handleAutofocus","_this6","autofocus","split","_this7","defaultRender","_ref","inputHandlers","isDuplicate","isInvalid","h","$createElement","$tags","class","noRemove","pill","removeLabel","title","variant","on","remove","invalidFeedbackId","duplicateFeedbackId","limitFeedbackId","ariaDescribedby","$input","staticClass","style","outline","minWidth","attrs","domProps","directives","ref","$button","invisible","fontSize","click","normalizeSlot","tagListId","$field","role","$ul","$feedback","ariaLive","$invalid","forceShow","$duplicate","$limit","render","required","scope","$props","$content","$output","for","$removed","$hidden","hasTags","sizeFormClass","stateClass","tabindex","focusin","focusout"],"mappings":"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","sourcesContent":["var _watch;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// Tagged input form control\n// Based loosely on https://adamwathan.me/renderless-components-in-vuejs/\nimport { Vue } from '../../vue';\nimport { NAME_FORM_TAGS } from '../../constants/components';\nimport { EVENT_NAME_BLUR, EVENT_NAME_FOCUS, EVENT_NAME_FOCUSIN, EVENT_NAME_FOCUSOUT, EVENT_NAME_TAG_STATE, EVENT_OPTIONS_PASSIVE } from '../../constants/events';\nimport { CODE_BACKSPACE, CODE_DELETE, CODE_ENTER } from '../../constants/key-codes';\nimport { PROP_TYPE_ARRAY, PROP_TYPE_ARRAY_OBJECT_STRING, PROP_TYPE_ARRAY_STRING, PROP_TYPE_BOOLEAN, PROP_TYPE_FUNCTION, PROP_TYPE_NUMBER, PROP_TYPE_OBJECT, PROP_TYPE_STRING } from '../../constants/props';\nimport { RX_SPACES } from '../../constants/regex';\nimport { SLOT_NAME_DEFAULT, SLOT_NAME_ADD_BUTTON_TEXT } from '../../constants/slots';\nimport { arrayIncludes, concat } from '../../utils/array';\nimport { cssEscape } from '../../utils/css-escape';\nimport { attemptBlur, attemptFocus, closest, matches, requestAF, select } from '../../utils/dom';\nimport { eventOn, eventOff, stopEvent } from '../../utils/events';\nimport { identity } from '../../utils/identity';\nimport { isEvent, isNumber, isString } from '../../utils/inspect';\nimport { looseEqual } from '../../utils/loose-equal';\nimport { makeModelMixin } from '../../utils/model';\nimport { omit, pick, sortKeys } from '../../utils/object';\nimport { hasPropFunction, makeProp, makePropsConfigurable } from '../../utils/props';\nimport { escapeRegExp, toString, trim, trimLeft } from '../../utils/string';\nimport { formControlMixin, props as formControlProps } from '../../mixins/form-control';\nimport { formSizeMixin, props as formSizeProps } from '../../mixins/form-size';\nimport { formStateMixin, props as formStateProps } from '../../mixins/form-state';\nimport { idMixin, props as idProps } from '../../mixins/id';\nimport { listenersMixin } from '../../mixins/listeners';\nimport { normalizeSlotMixin } from '../../mixins/normalize-slot';\nimport { BButton } from '../button/button';\nimport { BFormInvalidFeedback } from '../form/form-invalid-feedback';\nimport { BFormText } from '../form/form-text';\nimport { BFormTag } from './form-tag'; // --- Constants ---\n\nvar _makeModelMixin = makeModelMixin('value', {\n  type: PROP_TYPE_ARRAY,\n  defaultValue: []\n}),\n    modelMixin = _makeModelMixin.mixin,\n    modelProps = _makeModelMixin.props,\n    MODEL_PROP_NAME = _makeModelMixin.prop,\n    MODEL_EVENT_NAME = _makeModelMixin.event; // Supported input types (for built in input)\n\n\nvar TYPES = ['text', 'email', 'tel', 'url', 'number']; // Default ignore input focus selector\n\nvar DEFAULT_INPUT_FOCUS_SELECTOR = ['.b-form-tag', 'button', 'input', 'select'].join(' '); // --- Helper methods ---\n// Escape special chars in string and replace\n// contiguous spaces with a whitespace match\n\nvar escapeRegExpChars = function escapeRegExpChars(str) {\n  return escapeRegExp(str).replace(RX_SPACES, '\\\\s');\n}; // Remove leading/trailing spaces from array of tags and remove duplicates\n\n\nvar cleanTags = function cleanTags(tags) {\n  return concat(tags).map(function (tag) {\n    return trim(toString(tag));\n  }).filter(function (tag, index, arr) {\n    return tag.length > 0 && arr.indexOf(tag) === index;\n  });\n}; // Processes an input/change event, normalizing string or event argument\n\n\nvar processEventValue = function processEventValue(event) {\n  return isString(event) ? event : isEvent(event) ? event.target.value || '' : '';\n}; // Returns a fresh empty `tagsState` object\n\n\nvar cleanTagsState = function cleanTagsState() {\n  return {\n    all: [],\n    valid: [],\n    invalid: [],\n    duplicate: []\n  };\n}; // --- Props ---\n\n\nvar props = makePropsConfigurable(sortKeys(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, idProps), modelProps), formControlProps), formSizeProps), formStateProps), {}, {\n  addButtonText: makeProp(PROP_TYPE_STRING, 'Add'),\n  addButtonVariant: makeProp(PROP_TYPE_STRING, 'outline-secondary'),\n  // Enable change event triggering tag addition\n  // Handy if using <select> as the input\n  addOnChange: makeProp(PROP_TYPE_BOOLEAN, false),\n  duplicateTagText: makeProp(PROP_TYPE_STRING, 'Duplicate tag(s)'),\n  feedbackAriaLive: makeProp(PROP_TYPE_STRING, 'assertive'),\n  // Disable the input focus behavior when clicking\n  // on element matching the selector (or selectors)\n  ignoreInputFocusSelector: makeProp(PROP_TYPE_ARRAY_STRING, DEFAULT_INPUT_FOCUS_SELECTOR),\n  // Additional attributes to add to the input element\n  inputAttrs: makeProp(PROP_TYPE_OBJECT, {}),\n  inputClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  inputId: makeProp(PROP_TYPE_STRING),\n  inputType: makeProp(PROP_TYPE_STRING, 'text', function (value) {\n    return arrayIncludes(TYPES, value);\n  }),\n  invalidTagText: makeProp(PROP_TYPE_STRING, 'Invalid tag(s)'),\n  limit: makeProp(PROP_TYPE_NUMBER),\n  limitTagsText: makeProp(PROP_TYPE_STRING, 'Tag limit reached'),\n  // Disable ENTER key from triggering tag addition\n  noAddOnEnter: makeProp(PROP_TYPE_BOOLEAN, false),\n  // Disable the focus ring on the root element\n  noOuterFocus: makeProp(PROP_TYPE_BOOLEAN, false),\n  noTagRemove: makeProp(PROP_TYPE_BOOLEAN, false),\n  placeholder: makeProp(PROP_TYPE_STRING, 'Add tag...'),\n  // Enable deleting last tag in list when CODE_BACKSPACE is\n  // pressed and input is empty\n  removeOnDelete: makeProp(PROP_TYPE_BOOLEAN, false),\n  // Character (or characters) that trigger adding tags\n  separator: makeProp(PROP_TYPE_ARRAY_STRING),\n  tagClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  tagPills: makeProp(PROP_TYPE_BOOLEAN, false),\n  tagRemoveLabel: makeProp(PROP_TYPE_STRING, 'Remove tag'),\n  tagRemovedLabel: makeProp(PROP_TYPE_STRING, 'Tag removed'),\n  tagValidator: makeProp(PROP_TYPE_FUNCTION),\n  tagVariant: makeProp(PROP_TYPE_STRING, 'secondary')\n})), NAME_FORM_TAGS); // --- Main component ---\n// @vue/component\n\nexport var BFormTags = /*#__PURE__*/Vue.extend({\n  name: NAME_FORM_TAGS,\n  mixins: [listenersMixin, idMixin, modelMixin, formControlMixin, formSizeMixin, formStateMixin, normalizeSlotMixin],\n  props: props,\n  data: function data() {\n    return {\n      hasFocus: false,\n      newTag: '',\n      tags: [],\n      // Tags that were removed\n      removedTags: [],\n      // Populated when tags are parsed\n      tagsState: cleanTagsState(),\n      focusState: null\n    };\n  },\n  computed: {\n    computedInputId: function computedInputId() {\n      return this.inputId || this.safeId('__input__');\n    },\n    computedInputType: function computedInputType() {\n      // We only allow certain types\n      return arrayIncludes(TYPES, this.inputType) ? this.inputType : 'text';\n    },\n    computedInputAttrs: function computedInputAttrs() {\n      var disabled = this.disabled,\n          form = this.form;\n      return _objectSpread(_objectSpread({}, this.inputAttrs), {}, {\n        // Must have attributes\n        id: this.computedInputId,\n        value: this.newTag,\n        disabled: disabled,\n        form: form\n      });\n    },\n    computedInputHandlers: function computedInputHandlers() {\n      return _objectSpread(_objectSpread({}, omit(this.bvListeners, [EVENT_NAME_FOCUSIN, EVENT_NAME_FOCUSOUT])), {}, {\n        blur: this.onInputBlur,\n        change: this.onInputChange,\n        focus: this.onInputFocus,\n        input: this.onInputInput,\n        keydown: this.onInputKeydown,\n        reset: this.reset\n      });\n    },\n    computedSeparator: function computedSeparator() {\n      // Merge the array into a string\n      return concat(this.separator).filter(isString).filter(identity).join('');\n    },\n    computedSeparatorRegExp: function computedSeparatorRegExp() {\n      // We use a computed prop here to precompile the RegExp\n      // The RegExp is a character class RE in the form of `/[abc]+/`\n      // where a, b, and c are the valid separator characters\n      // -> `tags = str.split(/[abc]+/).filter(t => t)`\n      var separator = this.computedSeparator;\n      return separator ? new RegExp(\"[\".concat(escapeRegExpChars(separator), \"]+\")) : null;\n    },\n    computedJoiner: function computedJoiner() {\n      // When tag(s) are invalid or duplicate, we leave them\n      // in the input so that the user can see them\n      // If there are more than one tag in the input, we use the\n      // first separator character as the separator in the input\n      // We append a space if the first separator is not a space\n      var joiner = this.computedSeparator.charAt(0);\n      return joiner !== ' ' ? \"\".concat(joiner, \" \") : joiner;\n    },\n    computeIgnoreInputFocusSelector: function computeIgnoreInputFocusSelector() {\n      // Normalize to an single selector with selectors separated by `,`\n      return concat(this.ignoreInputFocusSelector).filter(identity).join(',').trim();\n    },\n    disableAddButton: function disableAddButton() {\n      var _this = this;\n\n      // If 'Add' button should be disabled\n      // If the input contains at least one tag that can\n      // be added, then the 'Add' button should be enabled\n      var newTag = trim(this.newTag);\n      return newTag === '' || !this.splitTags(newTag).some(function (t) {\n        return !arrayIncludes(_this.tags, t) && _this.validateTag(t);\n      });\n    },\n    duplicateTags: function duplicateTags() {\n      return this.tagsState.duplicate;\n    },\n    hasDuplicateTags: function hasDuplicateTags() {\n      return this.duplicateTags.length > 0;\n    },\n    invalidTags: function invalidTags() {\n      return this.tagsState.invalid;\n    },\n    hasInvalidTags: function hasInvalidTags() {\n      return this.invalidTags.length > 0;\n    },\n    isLimitReached: function isLimitReached() {\n      var limit = this.limit;\n      return isNumber(limit) && limit >= 0 && this.tags.length >= limit;\n    }\n  },\n  watch: (_watch = {}, _defineProperty(_watch, MODEL_PROP_NAME, function (newValue) {\n    this.tags = cleanTags(newValue);\n  }), _defineProperty(_watch, \"tags\", function tags(newValue, oldValue) {\n    // Update the `v-model` (if it differs from the value prop)\n    if (!looseEqual(newValue, this[MODEL_PROP_NAME])) {\n      this.$emit(MODEL_EVENT_NAME, newValue);\n    }\n\n    if (!looseEqual(newValue, oldValue)) {\n      newValue = concat(newValue).filter(identity);\n      oldValue = concat(oldValue).filter(identity);\n      this.removedTags = oldValue.filter(function (old) {\n        return !arrayIncludes(newValue, old);\n      });\n    }\n  }), _defineProperty(_watch, \"tagsState\", function tagsState(newValue, oldValue) {\n    // Emit a tag-state event when the `tagsState` object changes\n    if (!looseEqual(newValue, oldValue)) {\n      this.$emit(EVENT_NAME_TAG_STATE, newValue.valid, newValue.invalid, newValue.duplicate);\n    }\n  }), _watch),\n  created: function created() {\n    // We do this in created to make sure an input event emits\n    // if the cleaned tags are not equal to the value prop\n    this.tags = cleanTags(this[MODEL_PROP_NAME]);\n  },\n  mounted: function mounted() {\n    // Listen for form reset events, to reset the tags input\n    var $form = closest('form', this.$el);\n\n    if ($form) {\n      eventOn($form, 'reset', this.reset, EVENT_OPTIONS_PASSIVE);\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    var $form = closest('form', this.$el);\n\n    if ($form) {\n      eventOff($form, 'reset', this.reset, EVENT_OPTIONS_PASSIVE);\n    }\n  },\n  methods: {\n    addTag: function addTag(newTag) {\n      newTag = isString(newTag) ? newTag : this.newTag;\n      /* istanbul ignore next */\n\n      if (this.disabled || trim(newTag) === '' || this.isLimitReached) {\n        // Early exit\n        return;\n      }\n\n      var parsed = this.parseTags(newTag); // Add any new tags to the `tags` array, or if the\n      // array of `allTags` is empty, we clear the input\n\n      if (parsed.valid.length > 0 || parsed.all.length === 0) {\n        // Clear the user input element (and leave in any invalid/duplicate tag(s)\n\n        /* istanbul ignore if: full testing to be added later */\n        if (matches(this.getInput(), 'select')) {\n          // The following is needed to properly\n          // work with `<select>` elements\n          this.newTag = '';\n        } else {\n          var invalidAndDuplicates = [].concat(_toConsumableArray(parsed.invalid), _toConsumableArray(parsed.duplicate));\n          this.newTag = parsed.all.filter(function (tag) {\n            return arrayIncludes(invalidAndDuplicates, tag);\n          }).join(this.computedJoiner).concat(invalidAndDuplicates.length > 0 ? this.computedJoiner.charAt(0) : '');\n        }\n      }\n\n      if (parsed.valid.length > 0) {\n        // We add the new tags in one atomic operation\n        // to trigger reactivity once (instead of once per tag)\n        // We do this after we update the new tag input value\n        // `concat()` can be faster than array spread, when both args are arrays\n        this.tags = concat(this.tags, parsed.valid);\n      }\n\n      this.tagsState = parsed; // Attempt to re-focus the input (specifically for when using the Add\n      // button, as the button disappears after successfully adding a tag\n\n      this.focus();\n    },\n    removeTag: function removeTag(tag) {\n      /* istanbul ignore next */\n      if (this.disabled) {\n        return;\n      } // TODO:\n      //   Add `onRemoveTag(tag)` user method, which if returns `false`\n      //   will prevent the tag from being removed (i.e. confirmation)\n      //   Or emit cancelable `BvEvent`\n\n\n      this.tags = this.tags.filter(function (t) {\n        return t !== tag;\n      });\n    },\n    reset: function reset() {\n      var _this2 = this;\n\n      this.newTag = '';\n      this.tags = [];\n      this.$nextTick(function () {\n        _this2.removedTags = [];\n        _this2.tagsState = cleanTagsState();\n      });\n    },\n    // --- Input element event handlers ---\n    onInputInput: function onInputInput(event) {\n      /* istanbul ignore next: hard to test composition events */\n      if (this.disabled || isEvent(event) && event.target.composing) {\n        // `event.target.composing` is set by Vue (`v-model` directive)\n        // https://github.com/vuejs/vue/blob/dev/src/platforms/web/runtime/directives/model.js\n        return;\n      }\n\n      var newTag = processEventValue(event);\n      var separatorRe = this.computedSeparatorRegExp;\n\n      if (this.newTag !== newTag) {\n        this.newTag = newTag;\n      } // We ignore leading whitespace for the following\n\n\n      newTag = trimLeft(newTag);\n\n      if (separatorRe && separatorRe.test(newTag.slice(-1))) {\n        // A trailing separator character was entered, so add the tag(s)\n        // Note: More than one tag on input event is possible via copy/paste\n        this.addTag();\n      } else {\n        // Validate (parse tags) on input event\n        this.tagsState = newTag === '' ? cleanTagsState() : this.parseTags(newTag);\n      }\n    },\n    onInputChange: function onInputChange(event) {\n      // Change is triggered on `<input>` blur, or `<select>` selected\n      // This event is opt-in\n      if (!this.disabled && this.addOnChange) {\n        var newTag = processEventValue(event);\n        /* istanbul ignore next */\n\n        if (this.newTag !== newTag) {\n          this.newTag = newTag;\n        }\n\n        this.addTag();\n      }\n    },\n    onInputKeydown: function onInputKeydown(event) {\n      // Early exit\n\n      /* istanbul ignore next */\n      if (this.disabled || !isEvent(event)) {\n        return;\n      }\n\n      var keyCode = event.keyCode;\n      var value = event.target.value || '';\n      /* istanbul ignore else: testing to be added later */\n\n      if (!this.noAddOnEnter && keyCode === CODE_ENTER) {\n        // Attempt to add the tag when user presses enter\n        stopEvent(event, {\n          propagation: false\n        });\n        this.addTag();\n      } else if (this.removeOnDelete && (keyCode === CODE_BACKSPACE || keyCode === CODE_DELETE) && value === '') {\n        // Remove the last tag if the user pressed backspace/delete and the input is empty\n        stopEvent(event, {\n          propagation: false\n        });\n        this.tags = this.tags.slice(0, -1);\n      }\n    },\n    // --- Wrapper event handlers ---\n    onClick: function onClick(event) {\n      var _this3 = this;\n\n      var ignoreFocusSelector = this.computeIgnoreInputFocusSelector;\n\n      if (!ignoreFocusSelector || !closest(ignoreFocusSelector, event.target, true)) {\n        this.$nextTick(function () {\n          _this3.focus();\n        });\n      }\n    },\n    onInputFocus: function onInputFocus(event) {\n      var _this4 = this;\n\n      if (this.focusState !== 'out') {\n        this.focusState = 'in';\n        this.$nextTick(function () {\n          requestAF(function () {\n            if (_this4.hasFocus) {\n              _this4.$emit(EVENT_NAME_FOCUS, event);\n\n              _this4.focusState = null;\n            }\n          });\n        });\n      }\n    },\n    onInputBlur: function onInputBlur(event) {\n      var _this5 = this;\n\n      if (this.focusState !== 'in') {\n        this.focusState = 'out';\n        this.$nextTick(function () {\n          requestAF(function () {\n            if (!_this5.hasFocus) {\n              _this5.$emit(EVENT_NAME_BLUR, event);\n\n              _this5.focusState = null;\n            }\n          });\n        });\n      }\n    },\n    onFocusin: function onFocusin(event) {\n      this.hasFocus = true;\n      this.$emit(EVENT_NAME_FOCUSIN, event);\n    },\n    onFocusout: function onFocusout(event) {\n      this.hasFocus = false;\n      this.$emit(EVENT_NAME_FOCUSOUT, event);\n    },\n    handleAutofocus: function handleAutofocus() {\n      var _this6 = this;\n\n      this.$nextTick(function () {\n        requestAF(function () {\n          if (_this6.autofocus) {\n            _this6.focus();\n          }\n        });\n      });\n    },\n    // --- Public methods ---\n    focus: function focus() {\n      if (!this.disabled) {\n        attemptFocus(this.getInput());\n      }\n    },\n    blur: function blur() {\n      if (!this.disabled) {\n        attemptBlur(this.getInput());\n      }\n    },\n    // --- Private methods ---\n    splitTags: function splitTags(newTag) {\n      // Split the input into an array of raw tags\n      newTag = toString(newTag);\n      var separatorRe = this.computedSeparatorRegExp; // Split the tag(s) via the optional separator\n      // Normally only a single tag is provided, but copy/paste\n      // can enter multiple tags in a single operation\n\n      return (separatorRe ? newTag.split(separatorRe) : [newTag]).map(trim).filter(identity);\n    },\n    parseTags: function parseTags(newTag) {\n      var _this7 = this;\n\n      // Takes `newTag` value and parses it into `validTags`,\n      // `invalidTags`, and duplicate tags as an object\n      // Split the input into raw tags\n      var tags = this.splitTags(newTag); // Base results\n\n      var parsed = {\n        all: tags,\n        valid: [],\n        invalid: [],\n        duplicate: []\n      }; // Parse the unique tags\n\n      tags.forEach(function (tag) {\n        if (arrayIncludes(_this7.tags, tag) || arrayIncludes(parsed.valid, tag)) {\n          // Unique duplicate tags\n          if (!arrayIncludes(parsed.duplicate, tag)) {\n            parsed.duplicate.push(tag);\n          }\n        } else if (_this7.validateTag(tag)) {\n          // We only add unique/valid tags\n          parsed.valid.push(tag);\n        } else {\n          // Unique invalid tags\n          if (!arrayIncludes(parsed.invalid, tag)) {\n            parsed.invalid.push(tag);\n          }\n        }\n      });\n      return parsed;\n    },\n    validateTag: function validateTag(tag) {\n      var tagValidator = this.tagValidator;\n      return hasPropFunction(tagValidator) ? tagValidator(tag) : true;\n    },\n    getInput: function getInput() {\n      // Returns the input element reference (or null if not found)\n      // We need to escape `computedInputId` since it can be user-provided\n      return select(\"#\".concat(cssEscape(this.computedInputId)), this.$el);\n    },\n    // Default User Interface render\n    defaultRender: function defaultRender(_ref) {\n      var addButtonText = _ref.addButtonText,\n          addButtonVariant = _ref.addButtonVariant,\n          addTag = _ref.addTag,\n          disableAddButton = _ref.disableAddButton,\n          disabled = _ref.disabled,\n          duplicateTagText = _ref.duplicateTagText,\n          inputAttrs = _ref.inputAttrs,\n          inputClass = _ref.inputClass,\n          inputHandlers = _ref.inputHandlers,\n          inputType = _ref.inputType,\n          invalidTagText = _ref.invalidTagText,\n          isDuplicate = _ref.isDuplicate,\n          isInvalid = _ref.isInvalid,\n          isLimitReached = _ref.isLimitReached,\n          limitTagsText = _ref.limitTagsText,\n          noTagRemove = _ref.noTagRemove,\n          placeholder = _ref.placeholder,\n          removeTag = _ref.removeTag,\n          tagClass = _ref.tagClass,\n          tagPills = _ref.tagPills,\n          tagRemoveLabel = _ref.tagRemoveLabel,\n          tagVariant = _ref.tagVariant,\n          tags = _ref.tags;\n      var h = this.$createElement; // Make the list of tags\n\n      var $tags = tags.map(function (tag) {\n        tag = toString(tag);\n        return h(BFormTag, {\n          class: tagClass,\n          // `BFormTag` will auto generate an ID\n          // so we do not need to set the ID prop\n          props: {\n            disabled: disabled,\n            noRemove: noTagRemove,\n            pill: tagPills,\n            removeLabel: tagRemoveLabel,\n            tag: 'li',\n            title: tag,\n            variant: tagVariant\n          },\n          on: {\n            remove: function remove() {\n              return removeTag(tag);\n            }\n          },\n          key: \"tags_\".concat(tag)\n        }, tag);\n      }); // Feedback IDs if needed\n\n      var invalidFeedbackId = invalidTagText && isInvalid ? this.safeId('__invalid_feedback__') : null;\n      var duplicateFeedbackId = duplicateTagText && isDuplicate ? this.safeId('__duplicate_feedback__') : null;\n      var limitFeedbackId = limitTagsText && isLimitReached ? this.safeId('__limit_feedback__') : null; // Compute the `aria-describedby` attribute value\n\n      var ariaDescribedby = [inputAttrs['aria-describedby'], invalidFeedbackId, duplicateFeedbackId, limitFeedbackId].filter(identity).join(' '); // Input\n\n      var $input = h('input', {\n        staticClass: 'b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0',\n        class: inputClass,\n        style: {\n          outline: 0,\n          minWidth: '5rem'\n        },\n        attrs: _objectSpread(_objectSpread({}, inputAttrs), {}, {\n          'aria-describedby': ariaDescribedby || null,\n          type: inputType,\n          placeholder: placeholder || null\n        }),\n        domProps: {\n          value: inputAttrs.value\n        },\n        on: inputHandlers,\n        // Directive needed to get `event.target.composing` set (if needed)\n        directives: [{\n          name: 'model',\n          value: inputAttrs.value\n        }],\n        ref: 'input'\n      }); // Add button\n\n      var $button = h(BButton, {\n        staticClass: 'b-form-tags-button py-0',\n        class: {\n          // Only show the button if the tag can be added\n          // We use the `invisible` class instead of not rendering\n          // the button, so that we maintain layout to prevent\n          // the user input from jumping around\n          invisible: disableAddButton\n        },\n        style: {\n          fontSize: '90%'\n        },\n        props: {\n          disabled: disableAddButton || isLimitReached,\n          variant: addButtonVariant\n        },\n        on: {\n          click: function click() {\n            return addTag();\n          }\n        },\n        ref: 'button'\n      }, [this.normalizeSlot(SLOT_NAME_ADD_BUTTON_TEXT) || addButtonText]); // ID of the tags + input `<ul>` list\n      // Note we could concatenate `inputAttrs.id` with '__tag_list__'\n      // but `inputId` may be `null` until after mount\n      // `safeId()` returns `null`, if no user provided ID,\n      // until after mount when a unique ID is generated\n\n      var tagListId = this.safeId('__tag_list__');\n      var $field = h('li', {\n        staticClass: 'b-form-tags-field flex-grow-1',\n        attrs: {\n          role: 'none',\n          'aria-live': 'off',\n          'aria-controls': tagListId\n        },\n        key: 'tags_field'\n      }, [h('div', {\n        staticClass: 'd-flex',\n        attrs: {\n          role: 'group'\n        }\n      }, [$input, $button])]); // Wrap in an unordered list element (we use a list for accessibility)\n\n      var $ul = h('ul', {\n        staticClass: 'b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center',\n        attrs: {\n          id: tagListId\n        },\n        key: 'tags_list'\n      }, [$tags, $field]); // Assemble the feedback\n\n      var $feedback = h();\n\n      if (invalidTagText || duplicateTagText || limitTagsText) {\n        // Add an aria live region for the invalid/duplicate tag\n        // messages if the user has not disabled the messages\n        var ariaLive = this.feedbackAriaLive,\n            joiner = this.computedJoiner; // Invalid tag feedback if needed (error)\n\n        var $invalid = h();\n\n        if (invalidFeedbackId) {\n          $invalid = h(BFormInvalidFeedback, {\n            props: {\n              id: invalidFeedbackId,\n              ariaLive: ariaLive,\n              forceShow: true\n            },\n            key: 'tags_invalid_feedback'\n          }, [this.invalidTagText, ': ', this.invalidTags.join(joiner)]);\n        } // Duplicate tag feedback if needed (warning, not error)\n\n\n        var $duplicate = h();\n\n        if (duplicateFeedbackId) {\n          $duplicate = h(BFormText, {\n            props: {\n              id: duplicateFeedbackId,\n              ariaLive: ariaLive\n            },\n            key: 'tags_duplicate_feedback'\n          }, [this.duplicateTagText, ': ', this.duplicateTags.join(joiner)]);\n        } // Limit tags feedback if needed (warning, not error)\n\n\n        var $limit = h();\n\n        if (limitFeedbackId) {\n          $limit = h(BFormText, {\n            props: {\n              id: limitFeedbackId,\n              ariaLive: ariaLive\n            },\n            key: 'tags_limit_feedback'\n          }, [limitTagsText]);\n        }\n\n        $feedback = h('div', {\n          attrs: {\n            'aria-live': 'polite',\n            'aria-atomic': 'true'\n          },\n          key: 'tags_feedback'\n        }, [$invalid, $duplicate, $limit]);\n      } // Return the content\n\n\n      return [$ul, $feedback];\n    }\n  },\n  render: function render(h) {\n    var name = this.name,\n        disabled = this.disabled,\n        required = this.required,\n        form = this.form,\n        tags = this.tags,\n        computedInputId = this.computedInputId,\n        hasFocus = this.hasFocus,\n        noOuterFocus = this.noOuterFocus; // Scoped slot properties\n\n    var scope = _objectSpread({\n      // Array of tags (shallow copy to prevent mutations)\n      tags: tags.slice(),\n      // <input> v-bind:inputAttrs\n      inputAttrs: this.computedInputAttrs,\n      // We don't include this in the attrs, as users may want to override this\n      inputType: this.computedInputType,\n      // <input> v-on:inputHandlers\n      inputHandlers: this.computedInputHandlers,\n      // Methods\n      removeTag: this.removeTag,\n      addTag: this.addTag,\n      reset: this.reset,\n      // <input> :id=\"inputId\"\n      inputId: computedInputId,\n      // Invalid/Duplicate state information\n      isInvalid: this.hasInvalidTags,\n      invalidTags: this.invalidTags.slice(),\n      isDuplicate: this.hasDuplicateTags,\n      duplicateTags: this.duplicateTags.slice(),\n      isLimitReached: this.isLimitReached,\n      // If the 'Add' button should be disabled\n      disableAddButton: this.disableAddButton\n    }, pick(this.$props, ['addButtonText', 'addButtonVariant', 'disabled', 'duplicateTagText', 'form', 'inputClass', 'invalidTagText', 'limit', 'limitTagsText', 'noTagRemove', 'placeholder', 'required', 'separator', 'size', 'state', 'tagClass', 'tagPills', 'tagRemoveLabel', 'tagVariant'])); // Generate the user interface\n\n\n    var $content = this.normalizeSlot(SLOT_NAME_DEFAULT, scope) || this.defaultRender(scope); // Generate the `aria-live` region for the current value(s)\n\n    var $output = h('output', {\n      staticClass: 'sr-only',\n      attrs: {\n        id: this.safeId('__selected_tags__'),\n        role: 'status',\n        for: computedInputId,\n        'aria-live': hasFocus ? 'polite' : 'off',\n        'aria-atomic': 'true',\n        'aria-relevant': 'additions text'\n      }\n    }, this.tags.join(', ')); // Removed tag live region\n\n    var $removed = h('div', {\n      staticClass: 'sr-only',\n      attrs: {\n        id: this.safeId('__removed_tags__'),\n        role: 'status',\n        'aria-live': hasFocus ? 'assertive' : 'off',\n        'aria-atomic': 'true'\n      }\n    }, this.removedTags.length > 0 ? \"(\".concat(this.tagRemovedLabel, \") \").concat(this.removedTags.join(', ')) : ''); // Add hidden inputs for form submission\n\n    var $hidden = h();\n\n    if (name && !disabled) {\n      // We add hidden inputs for each tag if a name is provided\n      // When there are currently no tags, a visually hidden input\n      // with empty value is rendered for proper required handling\n      var hasTags = tags.length > 0;\n      $hidden = (hasTags ? tags : ['']).map(function (tag) {\n        return h('input', {\n          class: {\n            'sr-only': !hasTags\n          },\n          attrs: {\n            type: hasTags ? 'hidden' : 'text',\n            value: tag,\n            required: required,\n            name: name,\n            form: form\n          },\n          key: \"tag_input_\".concat(tag)\n        });\n      });\n    } // Return the rendered output\n\n\n    return h('div', {\n      staticClass: 'b-form-tags form-control h-auto',\n      class: [{\n        focus: hasFocus && !noOuterFocus && !disabled,\n        disabled: disabled\n      }, this.sizeFormClass, this.stateClass],\n      attrs: {\n        id: this.safeId(),\n        role: 'group',\n        tabindex: disabled || noOuterFocus ? null : '-1',\n        'aria-describedby': this.safeId('__selected_tags__')\n      },\n      on: {\n        click: this.onClick,\n        focusin: this.onFocusin,\n        focusout: this.onFocusout\n      }\n    }, [$output, $removed, $content, $hidden]);\n  }\n});"]},"metadata":{},"sourceType":"module"}